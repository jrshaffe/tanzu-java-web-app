accelerator:
  displayName: Tanzu Java Spring Api Provider (23)
  description: A sample Spring Boot web application built with Tanzu supply-chain that uses sprindocs to generate an openAPI document.
  iconUrl: https://github.com/sample-accelerators/icons/raw/master/icon-boot.png
  tags:
  - java
  - spring
  - web
  - tanzu
  - openAPI
  - api

  options:
  - name: repositoryPrefix
    inputType: text
    label: Prefix for the container image repository
    defaultValue: dev.local
    required: true
  - name: toggle
    label: Will This Project Expose an API?
    display: true
    dataType: boolean
    defaultValue: true
  - name: exposeOpenAPIEndpoint2
    label: 'depends on toggle'
    description: Visibility depends on the value of the toggle option being true.
    dependsOn:
      name: toggle
    defaultValue: text value
  - name: exposeOpenAPIEndpoint
    label: Expose OpenAPI endpoint
    inputType: select
    display: true
    defaultValue: "true"
    choices:
      - text: "true"
        value: "true"
      - text: "false"
        value: "false"
#Testing
engine:
  merge:
  - include: [ "**/*" ]
    exclude: [ "config/*.yaml", "Tiltfile", "README.md", "grype.yaml", "catalog/*.yaml", ".github/workflows/**", "src/main/resources/*.yml", "pom.xml" ]
  - include: [ "config/*.yaml", "Tiltfile" ]
    chain:
    - type: ReplaceText
      substitutions:
      - text: tanzu-java-web-app
        with: "#artifactId"
    - type: ReplaceText
      substitutions:
      - text: your-registry.io/project
        with: "#repositoryPrefix"
  - include: [ "README.md" ]
    chain:
    - type: ReplaceText
      substitutions:
      - text: tanzu-java-web-app
        with: "#artifactId"
  - include: [ "catalog/*.yaml" ]
    chain:
    - type: ReplaceText
      substitutions:
      - text: tanzu-java-web-app
        with: "#artifactId"
    - type: RewritePath
      rewriteTo: "#filename"
  - include: [ "src/main/resources/*.yml" ]
    chain:
      - type: ReplaceText
        substitutions:
          - text: expose-open-api-endpoint
            with: "#exposeOpenAPIEndpoint"
  - include: [ "pom.xml" ]
    chain:
      - type: ReplaceText
        condition: "#toggle"
        substitutions:
          - text: <!-- TEST -->
            with: "#artifactId"


#  <dependency>
#  <groupId>org.springdoc</groupId>
#  <artifactId>springdoc-openapi-ui</artifactId>
#  <version>1.6.9</version>
#  </dependency>